<html>
<head>
<title>Login page</title>
<style >
table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width: 70%;
}

td, th {
    border: 2px solid #dddddd;
    text-align: left;
    padding: 8px;
}
tr:nth-child(even) {
    background-color: #85B0BE;
}
tr:nth-child(odd) {
    background-color:  #CBF6FF;
}

</style>
<script language="Javascript">
var AllProductDetailsObject = [ {Code:101,ProductName:"Maggie",Description:"2-mins noodles",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:10},
{Code:102,ProductName:"Bournvita",Description:"Chocolatemilkpowder",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:50},
{Code:103,ProductName:"Kissan Jam",Description:"Orange marmalade",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:85},
{Code:104,ProductName:"Amul Butter",Description:"Zero percent fat",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:10},
{Code:105,ProductName:"Real Juice",Description:"Apple Juice",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:30},
{Code:106,ProductName:"Cremica Bread",Description:"Brown Bread",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:15},
{Code:107,ProductName:"Dairymilk",Description:"nut Chocolate",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:10},
{Code:108,ProductName:"Ashirwad Atta",Description:"Multigrain flour",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:100},
{Code:109,ProductName:"Milk",Description:"Double toned Milk",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:10},
{Code:110,ProductName:"Cheese",Description:"Mozeralla",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:60},
{Code:111,ProductName:"Salt",Description:"Tata Salt",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:40},
{Code:112,ProductName:"Black Pepper",Description:"Crushed Pepper",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:30},
{Code:113,ProductName:"Coffee",Description:"Nescafe Coffee",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:50},
{Code:114,ProductName:"Sugar",Description:"White Sugar",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:20},
{Code:115,ProductName:"Oats",Description:"Masala Oats",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:10},
{Code:116,ProductName:"Cornflakes",Description:"Choco Cornflakes",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:100},
{Code:117,ProductName:"Frozen Corns",Description:"Mcain Corns",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:110},
{Code:118,ProductName:"Baking Powder",Description:"Wakefield product",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:10},
{Code:119,ProductName:"Shampoo",Description:"Loreal",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:90},
{Code:120,ProductName:"Surf Excel",Description:"Detergent",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:80},
{Code:121,ProductName:"DOVE",Description:"Bathing Soap",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:20},
{Code:122,ProductName:"Colgate",Description:"Toothpaste",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:10},
{Code:123,ProductName:"Dettol",Description:"Handwash",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:40},
{Code:124,ProductName:"MaggieSoup",Description:"Manchow",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:20},
 {Code:125,ProductName:"Pepsi",Description:"Beverage",VAT:12,ShippingCost:0,SelectedUnits:0,pricePerUnit:60}];
						
var selectedProductDetails = [];
var billedProductDetails = [];
function addRowToTable(index)
{
	var table = document.getElementById("SelectedProductsTable");
	var row = table.insertRow(1);
	var cell1 = row.insertCell(0);
	var cell2 = row.insertCell(1);
	var cell3 = row.insertCell(2);
	var cell4 = row.insertCell(3);
	var cell5 = row.insertCell(4);
	var cell6 = row.insertCell(5);
	cell1.innerHTML = selectedProductDetails[index].Code;
	cell2.innerHTML = selectedProductDetails[index].ProductName;
	cell3.innerHTML = selectedProductDetails[index].Description;
	cell4.innerHTML = selectedProductDetails[index].VAT;
	cell5.innerHTML = selectedProductDetails[index].ShippingCost;
	cell6.innerHTML = selectedProductDetails[index].SelectedUnits;
}
function addRowToBillTable(index)
{
	var table = document.getElementById("BillTable");
	var row = table.insertRow(1);
	var cell1 = row.insertCell(0);
	var cell2 = row.insertCell(1);
	var cell3 = row.insertCell(2);
	var cell4 = row.insertCell(3);
	var cell5 = row.insertCell(4);
	cell1.innerHTML = billedProductDetails[index].Code;
	cell2.innerHTML = billedProductDetails[index].Description;
	cell3.innerHTML = billedProductDetails[index].pricePerUnit	;
	cell4.innerHTML = billedProductDetails[index].SelectedUnits;
	cell5.innerHTML = billedProductDetails[index].ToatlPricePerPiece;
	
}
function AddProduct()
{
	var enteredProductCode = document.getElementById("ProductCodeId");
	var enteredUnits = document.getElementById("TotalUnitsId");

	if(parseInt(enteredProductCode.value) === parseInt(parseInt(enteredProductCode.value), 10) && parseInt(enteredUnits.value) === parseInt(parseInt(enteredUnits.value), 10))
	{
		if(selectedProductDetails.length>=5)
		{
			alert("Can't Select more than 5 products");
			enteredProductCode.value = '';
			enteredUnits.value = '';
		}
		else
		{
			var TotalProducts = AllProductDetailsObject.length;
			var TotalSelectedProducts = selectedProductDetails.length;
			var validProduct = false;
			var existingProduct = false;
			for(i=0;i < TotalSelectedProducts;i++)
                       
                              { 
				if(enteredProductCode.value == selectedProductDetails[i].Code)
				
                               {
					existingProduct = true;
                                        var thetbl=document.getElementById("SelectedProductsTable");
                                        for( i=0;i<thetbl.length;i++)
                               {
                                  if(thetbl.row[i].cell[0]==enteredProductCode.value)
                                   {
                                       thetbl.row[i].cell[5]=enteredUnits.value;
                                   }                                                                     
				}
			}
				}
                       
                           if(existingProduct == true)
			{
				alert("Already Selected Product");//
				enteredProductCode.value = '';
				enteredUnits.value = '';	
			}
			else
			{
				for(i=0;i < TotalProducts;i++)
				{ 
					if(enteredProductCode.value == AllProductDetailsObject[i].Code)
					{
						validProduct = true;
						selectedProductDetails.push(AllProductDetailsObject[i]);
						selectedProductDetails[selectedProductDetails.length-1].SelectedUnits = enteredUnits.value;
						addRowToTable(selectedProductDetails.length-1);
						enteredProductCode.value = '';
						enteredUnits.value = '';
						
					}
				}
				if(validProduct == false)
				{
					alert("Incorrect Product Code");
					enteredProductCode.value = '';
					enteredUnits.value = '';
				}
			}
		}
		
	}
	else
	{
		alert("Input Should not be empty or non-integer value");
		enteredProductCode.value = '';
		enteredUnits.value = '';
	}

}
function GenerateBill()
{
	if(selectedProductDetails.length ==0 )
	{
		alert("Select atleast one product please.");
	}
	else
	{
	
		var dat= new Date();
		var dt = dat.toLocaleDateString();
		var ti = dat.toLocaleTimeString();
		var bill = Math.random()*10;
		var OpenWindow = window.open(" "," ",'width=335,height=330,resizable=1');
		var html = "<html><head></head><body><h3>Bill</h3><table><tr><th>Sno</th><th>Product</th><th>Unit-Price</th><th>Quantity</th><th>Total</th></tr>" 
		var break_tag = "<br>";
		OpenWindow.document.open();
		OpenWindow.document.write("<html><head></head><body><h1>Bill</h1><br><h3>Operator: Riya <br> Bill no : " + bill + "</h3><h3>Date : " + dt + "</h3><h3>Time : " + ti + "</h3>");
		OpenWindow.document.write("<table><tr><th>Sno</th><th>Product</th><th>Unit-Price</th><th>Quantity</th><th>Total</th></tr>");
		
		/*document.getElementById('DataEntryScreenDiv').style.display = "none";
		document.getElementById('BillScreenDiv').style.display = "block";
		document.getElementById("BillNumberId").innerHTML = Math.floor((Math.random() * 10000) + 100);
		document.getElementById("DateTimeId").innerHTML= Date();*/
		var TotalSelectedProducts= selectedProductDetails.length;
		var totalAmount = 0;
		for(i=0;i < TotalSelectedProducts;i++)
		{ 
			var selectedProduct = selectedProductDetails[i];
			var priceWithVATAndShipingCharges = (((selectedProduct.pricePerUnit*(1+(selectedProduct.VAT/100))) + selectedProduct.ShippingCost)*selectedProduct.SelectedUnits).toFixed(2);
			totalAmount = totalAmount + parseFloat(priceWithVATAndShipingCharges);
			billedProductDetails.push({Code:selectedProduct.Code,Description:selectedProduct.Description,SelectedUnits:selectedProduct.SelectedUnits,pricePerUnit:selectedProduct.pricePerUnit,ToatlPricePerPiece:priceWithVATAndShipingCharges});
			//addRowToBillTable(billedProductDetails.length-1);
			OpenWindow.document.write("<tr><td>"+(i+1)+"</td><td>" +selectedProduct.ProductName+ "</td>" + "<td>" + billedProductDetails[i].pricePerUnit+ "</td><td>" + billedProductDetails[i].SelectedUnits + "</td>" + "<td>" +billedProductDetails[i].ToatlPricePerPiece + "</td></tr>");
		}
		OpenWindow.document.write("</table><br><h3>Grand Total : " + totalAmount.toFixed(2) + "</h3></body></html>");
		//document.getElementById("TotalCostId").innerHTML= totalAmount.toFixed(2);
		
		
	}
}
function win_open()
{
var dat= new Date();
var dt = dat.toLocaleDateString();
var ti = dat.toLocaleTimeString();
var bill = Math.random()*10;
var OpenWindow = window.open(" "," ",'width=335,height=330,resizable=1');
var html = "<html><head></head><body><h3>Bill</h3><table><tr><th>Sno</th><th>Product</th><th>Unit-Price</th><th>Quantity</th><th>Total</th></tr>" 
var break_tag = "<br>";
OpenWindow.document.open();
OpenWindow.document.write("<html><head></head><body><h1>Bill</h1><br><h3>Operator: Riya <br> Bill no : " + bill + "</h3><h3>Date : " + dt + "</h3><h3>Time : " + ti + "</h3>");
OpenWindow.document.write("<table><tr><th>Sno</th><th>Product</th><th>Unit-Price</th><th>Quantity</th><th>Total</th></tr>");
for(var i=0;i<=3;i++)
{
	OpenWindow.document.write("<tr><td>1</td><td>" +billedProductDetails[i].Code+ "</td>" + "<td>" + billedProductDetails[i].Code+ "</td><td>" + billedProductDetails[i].Code + "</td>" + "<td>" +billedProductDetails[i].Code + "</td></tr>");
}

OpenWindow.document.write("</table><br><h2>Grand Total : " + sum + "</h2></body></html>");
}

</script>
</head>
<body background="grocerystore.jpg">
<div id = "DataEntryScreenDiv">
	<div style="margin-left:470px;margin-top:10px;">
		<h1>Data Entry Screen</h1>
		<span>Product Code</span><input style="margin-left:3px;" id = "ProductCodeId" type="text" /><br><br>
		<span>No. of Units</span><input style="margin-left:11px;"id = "TotalUnitsId" type="text" /><br>
		<input style="margin-left:210px;margin-top:10px;" type="button" onclick="AddProduct()" value="Select"/>
	</div>
	<div style="margin-left:150px;margin-top:40px;">
	<h2>All Product</h2>
		<table id="SelectedProductsTable">
		  <tr>
			<th>Code</th>
			<th>Name</th>
			<th>Details</th>
			<th>Vat(%)</th>
			<th>Shipping Cost</th>
			<th>Selected Units</th>
		  </tr>
		  
		</table>
		<input style="margin-left:750px;margin-top:20px;" type="button" onclick="GenerateBill()" value="GenerateBill"/>
	</div>
</div>



</body>
</html>


